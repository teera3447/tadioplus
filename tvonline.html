<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <title>Tadio+ ‡∏î‡∏π‡∏ó‡∏µ‡∏ß‡∏µ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://vjs.zencdn.net/8.10.0/video-js.css" rel="stylesheet" />
    <link href="https://unpkg.com/@videojs/themes@1.0.1/dist/fantasy/index.css" rel="stylesheet">

    <style>
        :root { 
            --bg: #f8f9fa; 
            --panel: #ffffff; 
            --accent: #ff4757; 
            --text: #333333; 
            --border: #eeeeee;
            --shadow: rgba(0,0,0,0.05);
        }

        body.dark { 
            --bg: #1a1a1a; 
            --panel: #2d2d2d; 
            --accent: #ff4757; 
            --text: #eeeeee; 
            --border: #444444;
            --shadow: rgba(0,0,0,0.3);
        }

        * { box-sizing: border-box; transition: background 0.3s, color 0.3s; }

        body { 
            margin: 0; 
            font-family: 'Kanit', sans-serif; 
            background: var(--bg); 
            color: var(--text); 
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* Navigation & Header */
        header { 
            padding: 15px; 
            background: var(--panel); 
            text-align: center; 
            border-bottom: 1px solid var(--border); 
            font-weight: 600; 
            font-size: 20px;
            color: var(--accent);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        #home-link, #toggle-theme { 
            position: absolute; top: 12px; font-size: 13px; padding: 6px 15px; 
            border-radius: 20px; text-decoration: none; cursor: pointer; 
            border: 1px solid var(--border); background: var(--panel); color: var(--text);
            box-shadow: 0 2px 5px var(--shadow);
        }
        #home-link { left: 15px; }
        #toggle-theme { right: 15px; }

        /* Main Layout */
        #app { 
            display: flex; 
            flex: 1;
            overflow: hidden; 
        }

        #playerWrap { 
            flex: 1; 
            background: #000; 
            display: flex; 
            flex-direction: column; 
            justify-content: center;
        }

        .video-js { width: 100% !important; height: 100% !important; }

        /* Sidebar Channels */
        #channels { 
            width: 350px; 
            background: var(--panel); 
            display: flex; 
            flex-direction: column; 
            border-left: 1px solid var(--border); 
        }

        .search-box { padding: 20px; border-bottom: 1px solid var(--border); }
        input { 
            width: 100%; 
            padding: 12px 20px; 
            border-radius: 25px; 
            border: 1px solid var(--border); 
            background: var(--bg); 
            color: var(--text); 
            outline: none; 
            font-family: 'Kanit';
        }
        input:focus { border-color: var(--accent); }

        #list { flex: 1; overflow-y: auto; padding: 10px; }
        
        .channel { 
            padding: 12px 15px; 
            margin-bottom: 8px;
            border-radius: 12px;
            cursor: pointer; 
            display: flex; 
            align-items: center; 
            gap: 15px;
            border: 1px solid transparent;
        }
        .channel:hover { background: var(--bg); transform: translateX(5px); }
        .channel.active { 
            background: var(--bg); 
            border-color: var(--accent);
            box-shadow: 0 4px 10px var(--shadow);
        }

        .channel img { 
            width: 45px; height: 45px; 
            object-fit: contain; 
            background: #fff; 
            border-radius: 10px; 
            padding: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        .channel span { font-size: 15px; font-weight: 400; }

        .status-bar { 
            padding: 10px 20px; 
            background: var(--panel); 
            font-size: 12px; 
            color: #888; 
            border-top: 1px solid var(--border); 
        }

        /* Footer */
        footer {
            background: var(--panel);
            padding: 20px;
            text-align: center;
            border-top: 1px solid var(--border);
            font-size: 13px;
            color: #888;
        }
        footer a { color: var(--accent); text-decoration: none; font-weight: 500; }

        /* Responsive */
        @media(max-width: 900px) { 
            #app { flex-direction: column; overflow: visible; } 
            #channels { width: 100%; height: auto; border-left: none; }
            #playerWrap { height: 56.25vw; min-height: 250px; }
            #list { max-height: 500px; }
        }
    </style>
</head>
<body>

<header>
    <a href="https://teera3447.github.io/tadioplus/" id="home-link">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    Tadio+ TV Online
    <button id="toggle-theme">üåó ‡∏ò‡∏µ‡∏°</button>
</header>

<div id="app">
    <div id="playerWrap">
        <video id="my-video" class="video-js vjs-theme-fantasy" controls preload="auto" playsinline></video>
        <div class="status-bar" id="status">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô...</div>
    </div>
    
    <div id="channels">
        <div class="search-box">
            <input type="text" id="search" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡πà‡∏≠‡∏á‡πÇ‡∏ó‡∏£‡∏ó‡∏±‡∏®‡∏ô‡πå..." oninput="filter()">
        </div>
        <div id="list"></div>
    </div>
</div>

<footer>
    <p>¬© 2026 <strong>Tadio+</strong> | ‡∏î‡∏π‡∏ó‡∏µ‡∏ß‡∏µ‡πÅ‡∏•‡∏∞‡∏ü‡∏±‡∏á‡∏ß‡∏¥‡∏ó‡∏¢‡∏∏‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå‡∏ü‡∏£‡∏µ 24 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á</p>
    <div class="footer-links">
        <a href="https://forms.gle/Bh3rELNDStE91HiN8">‡πÅ‡∏à‡πâ‡∏á‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</a> ‚Ä¢ <a href="#">‡∏ô‡πÇ‡∏¢‡∏ö‡∏≤‡∏¢‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß</a>
    </div>
</footer>

<script src="https://vjs.zencdn.net/8.10.0/video.min.js"></script>
<script src="https://unpkg.com/videojs-contrib-quality-levels@4.1.0/dist/videojs-contrib-quality-levels.min.js"></script>
<script src="https://unpkg.com/videojs-hls-quality-selector@2.0.0/dist/videojs-hls-quality-selector.min.js"></script>

<script>
    // Theme Logic
    const themeBtn = document.getElementById('toggle-theme');
    const savedTheme = localStorage.getItem('tadio-tv-theme');
    if (savedTheme === 'dark') document.body.classList.add('dark');

    themeBtn.addEventListener('click', () => {
        document.body.classList.toggle('dark');
        localStorage.setItem('tadio-tv-theme', document.body.classList.contains('dark') ? 'dark' : 'light');
    });

    // Player & Data Logic (‡∏Ñ‡∏á‡πÄ‡∏î‡∏¥‡∏°‡∏ï‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì)
    const BASE_WORKER_URL = "https://iptv.tadioplus.workers.dev"; 
    const GITHUB_BACKUP = "https://raw.githubusercontent.com/teera3447/tadioplus/refs/heads/main/tadio1.m3u";

    let allChannels = [];
    const statusText = document.getElementById('status');
    let v_player;

    document.addEventListener('DOMContentLoaded', () => {
        v_player = videojs('my-video', {
            fluid: false,
            responsive: true,
            autoplay: false,
            controlBar: {
                children: [
                    'playToggle',
                    'qualitySelector',
                    'liveDisplay',
                    'progressControl',
                    'volumePanel',
                    'fullscreenToggle',
                ],
            }
        });
        v_player.hlsQualitySelector({ displayCurrentQuality: true });
        loadM3U();
    });

    async function loadM3U() {
        let fetchUrl = `${BASE_WORKER_URL}/list`;
        try {
            statusText.innerText = "‚è≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£...";
            let response = await fetch(fetchUrl);
            const data = await response.text();
            parseM3U(data);
        } catch (error) {
            const res = await fetch(GITHUB_BACKUP);
            const text = await res.text();
            parseM3U(text);
        }
    }

    function parseM3U(data) {
        const lines = data.split('\n');
        const channels = [];
        for (let i = 0; i < lines.length; i++) {
            if (lines[i].startsWith('#EXTINF:')) {
                const info = lines[i];
                const url = lines[i + 1]?.trim();
                if (url && url.startsWith('http')) {
                    const name = info.split(',')[1] || "Unknown Channel";
                    const logoMatch = info.match(/tvg-logo="([^"]+)"/);
                    const logo = logoMatch ? logoMatch[1] : "";
                    channels.push({ name, url, logo });
                }
            }
        }
        allChannels = channels;
        render(allChannels);
        statusText.innerText = `üü¢ ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå: ${allChannels.length} ‡∏ä‡πà‡∏≠‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£`;
    }

    function fixUrl(url) {
        if (url.includes('livedoomovies') || !url.startsWith('https://')) {
            return `${BASE_WORKER_URL}/?url=` + encodeURIComponent(url);
        }
        return url;
    }

    function play(ch, el) {
        const finalUrl = fixUrl(ch.url);
        document.querySelectorAll('.channel').forEach(i => i.classList.remove('active'));
        el.classList.add('active');
        statusText.innerText = "üì° ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠: " + ch.name;
        v_player.src({ src: finalUrl, type: 'application/x-mpegURL' });
        v_player.play();
        
        // Auto scroll to player on mobile
        if(window.innerWidth <= 900) {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
    }

    function filter() {
        const txt = document.getElementById('search').value.toLowerCase();
        render(allChannels.filter(c => c.name.toLowerCase().includes(txt)));
    }

    function render(data) {
        const container = document.getElementById('list');
        container.innerHTML = "";
        data.forEach(ch => {
            const div = document.createElement('div');
            div.className = 'channel';
            const img = ch.logo ? `<img src="${ch.logo}" onerror="this.src='https://via.placeholder.com/50x50?text=TV'">` : 'üì∫';
            div.innerHTML = `${img} <span>${ch.name}</span>`;
            div.onclick = () => play(ch, div);
            container.appendChild(div);
        });
    }
</script>
</body>
</html>
