<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Tadio+ ‡∏î‡∏π‡∏ó‡∏µ‡∏ß‡∏µ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
  <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body { font-family: 'Kanit', sans-serif; background:#121212; color:white; margin:0; }
    .light-theme { background:#fff; color:black; }
    #top-bar { display:flex; justify-content:space-between; align-items:center; padding:10px 20px; gap:10px; }
    .theme-toggle,#home-link,.search-toggle{background:#444;color:white;border:none;padding:8px 12px;border-radius:8px;cursor:pointer;text-decoration:none;}
    .light-theme .theme-toggle,.light-theme #home-link,.light-theme .search-toggle{background:#ccc;color:black;}

    /* ‡πÇ‡∏•‡πÇ‡∏Å‡πâ */
    .logo-main { font-size: 1.5rem; font-weight: bold; }
    .logo-sub { font-size: 1rem; font-style: italic; opacity: 0.85; }

    #container { display:flex; gap:40px; padding:30px 40px; align-items:flex-start; }
    .player-wrapper { max-width:800px; flex:1 1 500px; }
    #tvPlayer { width:100%; aspect-ratio:16/9; background:black; border-radius:10px; }
    #current-channel { margin-top:12px; font-size:1rem; font-weight:bold; line-height:1.6; }
    .channel-container { display:grid; grid-template-columns:repeat(3,1fr); gap:10px; max-height:600px; overflow-y:auto; width:300px; }
    .channel-button { padding:10px; border-radius:8px; background:#333; color:white; text-align:center; cursor:pointer; transition:0.2s; font-size:14px; }
    .channel-button:hover { background:#f0c419; color:black; }

    .select-wrapper { display: flex; gap: 10px; margin-top: 10px; }
    .audio-select, .quality-select { padding: 6px 10px; border-radius: 4px; font-size: 1rem; border: 1px solid #444; background: #333; color: white; }
    .light-theme .audio-select, .light-theme .quality-select { border-color: #ccc; background: #fff; color: black; }

    /* ‡∏Å‡∏•‡πà‡∏≠‡∏á‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ */
    #search-box {
      display:none;
      padding:6px 10px;
      border-radius:8px;
      border:1px solid #666;
      font-size:1rem;
      background:#222;
      color:white;
    }
    .light-theme #search-box {
      background:#fff;
      color:black;
      border-color:#ccc;
    }

    /* Mobile */
    @media(max-width:768px){
      #container{flex-direction:column; padding:10px;}
      .channel-container{grid-template-columns:repeat(4,1fr); width:100%; gap:10px;}
      .channel-button{font-size:12px; padding:8px;}
      #current-channel{text-align:center;margin-top:10px;}

      .site-title-centered {
        flex: 1;
        text-align: center;
        font-size: 1.2rem;
      }
      #home-link, .theme-toggle, .search-toggle {
        font-size: 0.8rem;
        padding: 6px 8px;
      }
      #search-box{ width:100%; margin-top:6px; }
    }
  </style>
</head>
<body>
  <div id="top-bar">
    <a href="#" id="home-link">‚Üê ‡∏Å‡∏•‡∏±‡∏ö‡∏™‡∏π‡πà‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
    <div class="site-title-centered">
      <strong class="logo-main">Tadio+</strong> <em class="logo-sub">‡∏î‡∏π‡∏ó‡∏µ‡∏ß‡∏µ‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</em>
    </div>
    <div style="display:flex; gap:6px; align-items:center;">
      <button class="theme-toggle" onclick="toggleTheme()">üåó</button>
      <button class="search-toggle" onclick="toggleSearch()">üîç</button>
    </div>
  </div>
  <div style="text-align:right; padding:0 20px;">
    <input type="text" id="search-box" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡∏ß‡∏µ...">
  </div>

  <div id="container">
    <div class="player-wrapper">
      <video id="tvPlayer" controls playsinline></video>
      <div id="current-channel">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏£‡∏±‡∏ö‡∏ä‡∏°</div>
      <div class="select-wrapper">
        <select id="audio-select" class="audio-select" style="display:none;"></select>
        <select id="quality-select" class="quality-select" style="display:none;"></select>
      </div>
    </div>
    <div class="channel-container" aria-label="‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ä‡πà‡∏≠‡∏á‡∏ó‡∏µ‡∏ß‡∏µ"></div>
  </div>

  <script id="iptv-data" type="application/json">
[
 {"name":"NBT","url":"https://lb1-live-mv.v2h-cdn.com/hls/fffe/jvlbgvhf/jvlbgvhf.m3u8"},
 {"name":"TPBS","url":"https://lb1-live-mv.v2h-cdn.com/hls/fffd/muruugvl/muruugvl.m3u8"},
 {"name":"ALTV","url":"https://lb1-live-mv.v2h-cdn.com/hls/fffc/gvcvmuu/gvcvmuu.m3u8"},
 {"name":"Channel 3","url":"https://cdn6.goprimetime.info/feed/ch3hd/index.m3u8"},
 {"name":"Amarin TV","url":"https://cdn6.goprimetime.info/feed/amarin/index.m3u8"},
 {"name":"Workpoint","url":"https://cdn6.goprimetime.info/feed/workpoint/index.m3u8"},
 {"name":"Thairath TV","url":"https://cdn6.goprimetime.info/feed/thairath/index.m3u8"},
 {"name":"ONE 31","url":"https://cdn6.goprimetime.info/feed/onehd/index.m3u8"},
 {"name":"Nation TV","url":"https://cdn6.goprimetime.info/feed/nation/index.m3u8"},
 {"name":"TNN 16","url":"https://cdn6.goprimetime.info/feed/tnn/index.m3u8"},
 {"name":"PPTV HD","url":"https://cdn6.goprimetime.info/feed/pptv/index.m3u8"},
 {"name":"True4U","url":"https://cdn6.goprimetime.info/feed/true4u/index.m3u8"},
 {"name":"GMM 25","url":"https://cdn6.goprimetime.info/feed/gmm25/index.m3u8"},
 {"name":"MONO 29 (TH)","url":"https://cdn6.goprimetime.info/feed/mono29/index.m3u8"},
 {"name":"MONO 29 (ST)","url":"https://cdn6.goprimetime.info/feed/mono29st/index.m3u8"}
]
  </script>

  <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
  <script>
    const data = JSON.parse(document.getElementById('iptv-data').textContent);
    let hls;

    function renderChannels(filter="") {
      const container = document.querySelector('.channel-container');
      container.innerHTML = '';
      const grouped = {};
      data.forEach(ch => {
        const baseName = ch.name.startsWith("MONO 29") ? "MONO 29" : ch.name;
        if (!grouped[baseName]) grouped[baseName] = [];
        grouped[baseName].push(ch);
      });
      Object.keys(grouped).forEach(name => {
        if(filter && !name.toLowerCase().includes(filter.toLowerCase())) return;
        const btn = document.createElement('div');
        btn.className = 'channel-button';
        btn.textContent = name;
        btn.onclick = () => playChannel(name, grouped[name]);
        container.appendChild(btn);
      });
    }

    function playChannel(name, list) {
      const video = document.getElementById('tvPlayer');
      const audioSelect = document.getElementById('audio-select');
      const qualitySelect = document.getElementById('quality-select');

      if (hls) { hls.destroy(); }
      audioSelect.style.display = 'none';
      qualitySelect.style.display = 'none';

      let url = list[0].url;

      if (name === 'MONO 29') {
        audioSelect.style.display = 'block';
        audioSelect.innerHTML = list.map(c => `<option value="${c.url}">${c.name.includes('(ST)') ? 'Soundtrack' : 'Thai'}</option>`).join('');
        audioSelect.onchange = (e) => loadStream(e.target.value);
        url = audioSelect.value;
      }
      
      loadStream(url);
      document.getElementById('current-channel').innerHTML = `‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ö‡∏ä‡∏°: <b>${name}</b>`;

      function loadStream(streamUrl) {
        if (Hls.isSupported()) {
          hls = new Hls();
          hls.loadSource(streamUrl);
          hls.attachMedia(video);
          
          hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => {
            const levels = data.levels.map((level, i) => {
              if (level.height) {
                return { label: `${level.height}p`, index: i };
              }
              return null;
            }).filter(Boolean);

            if (levels.length > 1) {
              qualitySelect.style.display = 'block';
              qualitySelect.innerHTML = levels.map(level =>
                `<option value="${level.index}"${level.index === hls.currentLevel ? ' selected' : ''}>${level.label}</option>`
              ).join('');
              qualitySelect.onchange = (e) => hls.currentLevel = e.target.value;
            } else {
              qualitySelect.style.display = 'none';
            }
          });
          
        } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
          video.src = streamUrl;
        } else {
          alert('‡πÄ‡∏ö‡∏£‡∏≤‡∏ß‡πå‡πÄ‡∏ã‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö HLS');
          return;
        }
        video.play();
      }
    }

    function toggleTheme(){ document.body.classList.toggle('light-theme'); }
    function toggleSearch(){
      const box=document.getElementById('search-box');
      box.style.display=box.style.display==='none'?'inline-block':'none';
      if(box.style.display!=='none'){ box.focus(); }
    }

    document.getElementById('search-box').addEventListener('input', (e)=>{
      renderChannels(e.target.value);
    });

    renderChannels();
  </script>
</body>
</html>
